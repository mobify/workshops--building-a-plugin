/*! seesee 0.0.1 (https://github.com/mobify/seesee.git) */
!function(a){if("function"==typeof define&&define.amd)define(["$","plugin"],a);else{var b=window.Zepto||window.jQuery;a(b,window.Plugin)}}(function(a,b){function c(a,b){c.__super__.call(this,a,b,c.DEFAULTS)}var d={SEESEE:"seesee"},e=[{type:"visa",pattern:/^4/,format:/(\d{1,4})/g,maxLength:16},{type:"mastercard",pattern:/^5[1-5]/,format:/(\d{1,4})/g,maxLength:16}];return Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),c.VERSION="0.0.1",c.DEFAULTS={identified:a.noop},b.create("seesee",c,{_init:function(b){if(this.$element=a(b),!this.$element.is("input"))throw new Error("Seesee must be initialized against elements of type input");this.$element.addClass(d.SEESEE).attr("type","tel"),this.currentClass="",this._bindEvents()},destroy:function(){this.$element.removeData(this.name)},_bindEvents:function(){this.$element.on("keypress",this._restrictNumeric.bind(this)).on("keypress",this._restrictLength.bind(this)).on("keyup",this._formatCard.bind(this)).on("keyup",this._identifyType.bind(this))},_restrictNumeric:function(a){return a.metaKey||a.ctrlKey||0===a.which||a.which<33?!0:32===a.which?!1:!!/[\d\s]/.test(String.fromCharCode(a.which))},_restrictLength:function(a){var b=String.fromCharCode(a.which),c=this.$element.val().replace(/\s/g,"")+b,d=this._getCardType(c);return c.length<=d.maxLength},_formatCard:function(){var a=this.$element.val(),b=this._getCardType(a);if(b){var c=a.match(b.format);c&&this.$element.val(c.join(" "))}},_identifyType:function(){var a=this._getCardType(this.$element.val());a?(this.$element.removeClass(this.currentClass).addClass(a.type),this._trigger("identified",{type:a}),this.currentClass=a.type):this.$element.removeClass(this.currentClass)},_getCardType:function(a){for(var b=0,c=e.length;c>b;b++){var d=e[b];if(d.pattern.test(a))return d}return!1}}),a});